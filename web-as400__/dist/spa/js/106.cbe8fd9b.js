"use strict";(globalThis["webpackChunkweb_as400"]=globalThis["webpackChunkweb_as400"]||[]).push([[106],{8106:(e,o,r)=>{r.r(o),r.d(o,{default:()=>V});r(3610);var a=r(3673),t=r(1959),l=r(8880),i=r(2323),s=(r(6701),r(1907)),d=r(589);const m=(0,s.Q_)("uttil",{state:()=>({utilizzatori:[],search:(0,t.iH)(""),showoccurence:(0,t.iH)(!1),loading:!1,filter:"",grid:!1,dialog:(0,t.iH)(!1),maximizedToggle:(0,t.iH)(!0),selectedRow:{},programRow:[],loadProgram:!1,filterProgram:"",gridProgram:!1,searchProgram:(0,t.iH)("")}),getters:{getUtilizzatori:e=>e.utilizzatori,getProgram:e=>e.programRow},actions:{async setProgram(e){var o="";if("SQLRPGLE"===e.filetype||"RPGLE"===e.filetype)o="QRPGLESRC";else{if("SQL"!==e.filetype)return void(this.programRow=[]);o="QSQLSRC"}let r="http://"+window.location.hostname+":3300/utilizzatori/getProgram/?programName="+e.programName+"&lib="+e.lib+"&filetype="+o;console.log(r);const a=await fetch(r,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),t=await a.json();if(!a.ok)throw 409===t.code?new Error(t.message):new Error("Request failed with error code: "+a.status);this.programRow=t},async setUtilizzatori(e){let o="http://"+window.location.hostname+":3300/utilizzatori/find/?as="+d.Z.getItem("as")+"&userDb="+d.Z.getItem("userDb")+"&showoccurence="+e.showoccurence+"&programName="+e.programName;console.log(o);const r=await fetch(o,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),a=await r.json();if(!r.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+r.status);this.utilizzatori=a,this.sendLogsAction("as="+d.Z.getItem("as")+" userDb="+d.Z.getItem("userDb")+"  showoccurence="+e.showoccurence+"  programName="+e.programName)},async sendLogsAction(e){let o="http://"+window.location.hostname+":3300/db2/log/?log="+d.Z.getItem("currentUser")+" UTILIZZATORE: ---\x3e      \n\n"+e;const r=await fetch(o,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),a=await r.json();if(!r.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+r.status)}}}),n={class:"row q-pa-md"},c={class:"text-h6"},p={key:1},w={__name:"Utilizzatore",setup(e){const o=m(),r=()=>{s()},s=async()=>{try{const e={showoccurence:o.showoccurence?"s":"",programName:o.search};o.loading=!0,await o.setUtilizzatori(e),o.loading=!1}catch(e){console.log(e)}},d=e=>{o.dialog=!0,o.selectedRow=e;const r={programName:e.SRCCT,lib:e.LIBRCT,filetype:e.SRCTCT};w(r)},w=async e=>{try{o.loadProgram=!0,await o.setProgram(e),o.loadProgram=!1}catch(r){console.log(r)}};return(e,s)=>{const m=(0,a.up)("q-icon"),w=(0,a.up)("q-input"),g=(0,a.up)("q-btn"),u=(0,a.up)("q-card-section"),h=(0,a.up)("q-card"),f=(0,a.up)("q-toggle"),S=(0,a.up)("q-inner-loading"),y=(0,a.up)("q-badge"),U=(0,a.up)("q-td"),C=(0,a.up)("q-tr"),b=(0,a.up)("q-table"),T=(0,a.up)("q-space"),z=(0,a.up)("q-tooltip"),R=(0,a.up)("q-bar"),_=(0,a.up)("q-dialog"),k=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(h,{bordered:"",class:"q-my-sm q-mx-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:""},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a.Wm)(w,{class:"q-mr-sm",dense:"",square:"",color:"primary","label-color":"primary",outlined:"",modelValue:(0,t.SU)(o).search,"onUpdate:modelValue":s[0]||(s[0]=e=>(0,t.SU)(o).search=e),label:"Cerca chi chiama il programma..",onKeyup:(0,l.D2)(r,["enter"])},{append:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"bolt",color:"primary"})])),_:1},8,["modelValue","onKeyup"]),(0,a.Wm)(g,{class:"q-mr-xl",dense:"",inline:"",color:"primary q-ml-sm",label:"Search","icon-right":"send",onClick:r,disable:(0,t.SU)(o).search.length<3},null,8,["disable"])])])),_:1})])),_:1}),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"text-subtitle2 my-sticky-header-table","table-header-class":"text-white ",rows:(0,t.SU)(o).utilizzatori,"row-key":"utStore.getUtilizzatori.SRCCT","auto-width":"",loading:(0,t.SU)(o).loading,boarderd:"",title:"Risultato programmi",separator:"cell",style:{height:"720px"},filter:(0,t.SU)(o).filter,rowsPerPage:1e4,"rows-per-page-options":[0,8,18],ref:"tabCol",grid:(0,t.SU)(o).grid},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(w,{borderless:"",dense:"",debounce:"300",modelValue:(0,t.SU)(o).filter,"onUpdate:modelValue":s[2]||(s[2]=e=>(0,t.SU)(o).filter=e),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"search",color:"white"}),(0,a.Wm)(f,{modelValue:(0,t.SU)(o).grid,"onUpdate:modelValue":s[1]||(s[1]=e=>(0,t.SU)(o).grid=e),color:"red",label:"Grid"},null,8,["modelValue"])])),_:1},8,["modelValue"])])),loading:(0,a.w5)((()=>[(0,a.Wm)(S,{showing:"",color:"primary"})])),body:(0,a.w5)((e=>[(0,a.Wm)(C,{props:e,onClick:o=>d(e.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{key:"SRCCT",props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{color:"purple",class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.row.SRCCT),1)])),_:2},1024)])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"SRCTCT",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.row.SRCTCT),1)])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"LIBRCT",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.row.LIBRCT),1)])),_:2},1032,["props"])])),_:2},1032,["props","onClick"])])),_:1},8,["rows","loading","filter","grid"])])),_:1})])),_:1}),(0,a.Wm)(_,{modelValue:(0,t.SU)(o).dialog,"onUpdate:modelValue":s[7]||(s[7]=e=>(0,t.SU)(o).dialog=e),persistent:"",maximized:(0,t.SU)(o).maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T),(0,a.Wm)(g,{dense:"",flat:"",icon:"minimize",onClick:s[3]||(s[3]=e=>(0,t.SU)(o).maximizedToggle=!1),disable:!(0,t.SU)(o).maximizedToggle},{default:(0,a.w5)((()=>[(0,t.SU)(o).maximizedToggle?((0,a.wg)(),(0,a.j4)(z,{key:0,class:"bg-white text-primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("Minimize")])),_:1})):(0,a.kq)("",!0)])),_:1},8,["disable"]),(0,a.Wm)(g,{dense:"",flat:"",icon:"crop_square",onClick:s[4]||(s[4]=e=>(0,t.SU)(o).maximizedToggle=!0),disable:(0,t.SU)(o).maximizedToggle},{default:(0,a.w5)((()=>[(0,t.SU)(o).maximizedToggle?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(z,{key:0,class:"bg-white text-primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("Maximize")])),_:1}))])),_:1},8,["disable"]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(g,{dense:"",flat:"",icon:"close"},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{class:"bg-white text-primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("Close")])),_:1})])),_:1})),[[k]])])),_:1}),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a._)("div",c,(0,i.zw)("Cerchiamo: "+(0,t.SU)(o).search+" ----------\x3e "+(0,t.SU)(o).selectedRow.LIBRCT+"."+(0,t.SU)(o).selectedRow.SRCCT),1)])),_:1}),(0,a.Wm)(u,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"text-subtitle2 my-sticky-header-table","table-header-class":"text-white ",rows:(0,t.SU)(o).programRow,"row-key":"utStore.programRow.SRCDAT",dense:"","auto-width":"",loading:(0,t.SU)(o).loadProgram,title:"Risultato programmi",separator:"none",style:{height:"720px"},filter:(0,t.SU)(o).filterProgram,rowsPerPage:1e4,"rows-per-page-options":[0,8,18],ref:"tabCol",grid:(0,t.SU)(o).gridProgram},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(w,{borderless:"",dense:"",debounce:"300",modelValue:(0,t.SU)(o).filterProgram,"onUpdate:modelValue":s[6]||(s[6]=e=>(0,t.SU)(o).filterProgram=e),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"search",color:"white"}),(0,a.Wm)(f,{modelValue:(0,t.SU)(o).gridProgram,"onUpdate:modelValue":s[5]||(s[5]=e=>(0,t.SU)(o).gridProgram=e),color:"red",label:"Grid"},null,8,["modelValue"])])),_:1},8,["modelValue"])])),loading:(0,a.w5)((()=>[(0,a.Wm)(S,{showing:"",color:"primary"})])),body:(0,a.w5)((e=>[(0,a.Wm)(C,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{key:"SRCDAT",props:e,style:{"white-space":"pre-wrap","font-family":"'Courier New', Courier, monospace"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.row.SRCDAT),1)])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"SRCDTA",props:e,style:{"white-space":"pre-wrap","font-family":"'Courier New', Courier, monospace"}},{default:(0,a.w5)((()=>[e.row.SRCDTA.includes((0,t.SU)(o).search.toUpperCase())?((0,a.wg)(),(0,a.j4)(y,{key:0,color:"purple",class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.row.SRCDTA),1)])),_:2},1024)):((0,a.wg)(),(0,a.iD)("div",p,(0,i.zw)(e.row.SRCDTA),1))])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"SRCSEQ",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.row.SRCSEQ),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","loading","filter","grid"])])),_:1})])),_:1})])),_:1},8,["modelValue","maximized"])])}}};var g=r(151),u=r(5589),h=r(4842),f=r(4554),S=r(8240),y=r(8107),U=r(8886),C=r(6941),b=r(8186),T=r(3884),z=r(9721),R=r(6778),_=r(846),k=r(2025),W=r(5363),q=r(6115),P=r(677),x=r(7518),Q=r.n(x);const Z=w,V=Z;Q()(w,"components",{QCard:g.Z,QCardSection:u.Z,QInput:h.Z,QIcon:f.Z,QBtn:S.Z,QTable:y.Z,QToggle:U.Z,QInnerLoading:C.Z,QTr:b.Z,QTd:T.Z,QBadge:z.Z,QDialog:R.Z,QBar:_.Z,QSpace:k.Z,QTooltip:W.Z,QField:q.Z}),Q()(w,"directives",{ClosePopup:P.Z})}}]);