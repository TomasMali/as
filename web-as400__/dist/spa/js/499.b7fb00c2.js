"use strict";(globalThis["webpackChunkweb_as400"]=globalThis["webpackChunkweb_as400"]||[]).push([[499],{6499:(e,l,a)=>{a.r(l),a.d(l,{default:()=>j});var t=a(3673),o=a(1959),u=a(8825),r=a(5214),s=a(1390);const n={class:"q-pa-md row items-start q-gutter-md"},i=(0,t._)("div",{class:"text-h6"},"Librerie preferite",-1),d=(0,t.Uk)(" Scegliere 5 librerie che usi più frequentemente in modo da permettere una ricerca più veloce. "),c={class:"q-pa-md row items-start q-gutter-md"},m=(0,t.Uk)("No results"),p=(0,t.Uk)("No results"),v=(0,t.Uk)("No results"),f=(0,t.Uk)("No results"),b=(0,t.Uk)("No results"),g=(0,t.Uk)("Save"),w={__name:"Preference",setup(e){const l=(0,o.iH)(null),a=(0,o.iH)(null),w=(0,o.iH)(null),U=(0,o.iH)(null),_=(0,o.iH)(null),W=(0,o.iH)([]),A=(0,o.iH)([]),h=(0,r.H)(),P=(e,l)=>{l(""!==e?()=>{const l=e.toLowerCase();A.value=W.value.filter((e=>e.toLowerCase().indexOf(l)>-1))}:()=>{A.value=W.value})},V=(0,s.o)(),q=async()=>{try{const e={user:""};await V.getUsersAction(e),V.getUsers.forEach((e=>{W.value.push(e.TABLE_SCHEMA)}))}catch(e){console.log(e)}},O=(0,u.Z)(),k=async()=>{await h.setUserPref(O.localStorage.getItem("currentUser")),console.log(O.localStorage.getItem("currentUser")),console.log(h.getUserPrefAsObj),h.getUserPrefAsObj.length&&(l.value=h.getUserPrefAsObj[0].value,a.value=void 0!=h.getUserPrefAsObj[1]?h.getUserPrefAsObj[1].value:"",w.value=void 0!=h.getUserPrefAsObj[2]?h.getUserPrefAsObj[2].value:"",U.value=void 0!=h.getUserPrefAsObj[3]?h.getUserPrefAsObj[3].value:"",_.value=void 0!=h.getUserPrefAsObj[4]?h.getUserPrefAsObj[4].value:"")},y=async()=>{null==l.value&&null==a.value&&null==w.value&&null==U.value&&null==_.value&&O.dialog({title:"Attenzione",message:"Selezionare almeno una libreria preferita!"}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{})),await h.insertOrUpdateUserPrefs({user:O.localStorage.getItem("currentUser"),prefl1:l.value,prefl2:a.value,prefl3:w.value,prefl4:U.value,prefl5:_.value}),O.notify({color:"primary",textColor:"white",icon:"save",message:"Preferenza salvata con successo",actions:[{label:"Dismiss",color:"white",handler:()=>{}}]}),k()};return(0,t.bv)((()=>{console.log("mounted!"),q(),k()})),(e,o)=>{const u=(0,t.up)("q-card-section"),r=(0,t.up)("q-separator"),s=(0,t.up)("q-item-section"),W=(0,t.up)("q-item"),h=(0,t.up)("q-select"),V=(0,t.up)("q-btn"),q=(0,t.up)("q-card-actions"),O=(0,t.up)("q-card");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(O,{bordered:"",class:"my-card"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[i])),_:1}),(0,t.Wm)(u,{class:"q-pt-none"},{default:(0,t.w5)((()=>[d])),_:1}),(0,t.Wm)(r,{inset:""}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t.Wm)(h,{filled:"",modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=e=>l.value=e),"use-input":"","input-debounce":"0",label:"LIBDAT 1",clearable:"",options:A.value,onFilter:P,behavior:"menu"},{"no-option":(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{class:"text-grey"},{default:(0,t.w5)((()=>[m])),_:1})])),_:1})])),_:1},8,["modelValue","options"]),(0,t.Wm)(h,{filled:"",modelValue:a.value,"onUpdate:modelValue":o[1]||(o[1]=e=>a.value=e),"use-input":"","input-debounce":"0",label:"LIBDAT 2",clearable:"",options:A.value,onFilter:P,behavior:"menu"},{"no-option":(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{class:"text-grey"},{default:(0,t.w5)((()=>[p])),_:1})])),_:1})])),_:1},8,["modelValue","options"]),(0,t.Wm)(h,{filled:"",modelValue:w.value,"onUpdate:modelValue":o[2]||(o[2]=e=>w.value=e),"use-input":"","input-debounce":"0",label:"LIBDAT 3 ",clearable:"",options:A.value,onFilter:P,behavior:"menu"},{"no-option":(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{class:"text-grey"},{default:(0,t.w5)((()=>[v])),_:1})])),_:1})])),_:1},8,["modelValue","options"]),(0,t.Wm)(h,{filled:"",modelValue:U.value,"onUpdate:modelValue":o[3]||(o[3]=e=>U.value=e),"use-input":"","input-debounce":"0",label:"LIBDAT 4",clearable:"",options:A.value,onFilter:P,behavior:"menu"},{"no-option":(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{class:"text-grey"},{default:(0,t.w5)((()=>[f])),_:1})])),_:1})])),_:1},8,["modelValue","options"]),(0,t.Wm)(h,{filled:"",modelValue:_.value,"onUpdate:modelValue":o[4]||(o[4]=e=>_.value=e),"use-input":"","input-debounce":"0",label:"LIBDAT 5",clearable:"",options:A.value,onFilter:P,behavior:"menu"},{"no-option":(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{class:"text-grey"},{default:(0,t.w5)((()=>[b])),_:1})])),_:1})])),_:1},8,["modelValue","options"])])])),_:1}),(0,t.Wm)(q,{align:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{flat:"",onClick:y},{default:(0,t.w5)((()=>[g])),_:1})])),_:1})])),_:1})])}}};var U=a(151),_=a(5589),W=a(5869),A=a(3017),h=a(3414),P=a(2035),V=a(9367),q=a(8240),O=a(7518),k=a.n(O);const y=w,j=y;k()(w,"components",{QCard:U.Z,QCardSection:_.Z,QSeparator:W.Z,QSelect:A.Z,QItem:h.Z,QItemSection:P.Z,QCardActions:V.Z,QBtn:q.Z})}}]);