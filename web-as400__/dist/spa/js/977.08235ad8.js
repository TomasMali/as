"use strict";(globalThis["webpackChunkweb_as400"]=globalThis["webpackChunkweb_as400"]||[]).push([[977],{977:(e,t,o)=>{o.r(t),o.d(t,{default:()=>_});o(5663);var a=o(3673),s=o(1959),n=o(8880),i=(o(6701),o(1907));const l=(0,i.Q_)("bot",{state:()=>({botResponse:""}),getters:{getBotResponse:e=>e.botResponse},actions:{async setBotRequest(e){let t="http://"+window.location.hostname+":3300/db2/openai";const o=await fetch(t,{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e}),redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),a=await o.json();if(!o.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+o.status);this.botResponse=a}}}),r={class:"q-pa-md row justify-center",style:{height:"600px","overflow-y":"scroll"}},c={style:{width:"100%","max-width":"800px","max-height":""}},u=(0,a._)("div",{class:"code-formatter"},null,-1),p={class:"absolute-bottom"},d={__name:"BotGPT",setup(e){const t=l(),o=(0,s.iH)(""),i=(0,s.iH)(""),d=(0,s.iH)("");var m=(0,s.iH)(!1);const h=(0,s.iH)([]),v=(0,s.iH)([]),b=()=>g(),g=async()=>{h.value=[],v.value=[];const e=o.value;o.value="",m.value=!0,d.value=e,v.value.push(e);try{await t.setBotRequest(e),i.value=t.getBotResponse.bot,h.value.push(i.value),console.log(i.value),m.value=!1,o.value=""}catch(a){console.log(a)}};return(e,t)=>{const i=(0,a.up)("q-chat-message"),l=(0,a.up)("q-spinner-dots"),d=(0,a.up)("q-icon"),g=(0,a.up)("q-btn"),w=(0,a.up)("q-input");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",r,[(0,a._)("div",c,[(0,a.Wm)(i,{name:"me",text:v.value,avatar:"https://icons.iconarchive.com/icons/custom-icon-design/pretty-office-2/128/man-icon.png",sent:""},null,8,["text"]),(0,a.Wm)(i,{name:"Bot",avatar:"https://icons.iconarchive.com/icons/proycontec/robots/128/robot-screen-settings-icon.png","bg-color":"amber",text:h.value},null,8,["text"]),u,(0,s.SU)(m)?((0,a.wg)(),(0,a.j4)(l,{key:0,"bg-color":"amber",size:"2rem"})):(0,a.kq)("",!0)])]),(0,a._)("div",p,[(0,a.Wm)(w,{outlined:"","bottom-slots":"",onKeyup:(0,n.D2)(b,["enter"]),modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),label:"Chiedimi qualsiasi cosa"},{append:(0,a.w5)((()=>[""!==o.value?((0,a.wg)(),(0,a.j4)(d,{key:0,name:"close",onClick:t[0]||(t[0]=e=>o.value=""),class:"cursor-pointer"})):(0,a.kq)("",!0)])),after:(0,a.w5)((()=>[(0,a.Wm)(g,{onClick:b,round:"",dense:"",flat:"",icon:"send"})])),_:1},8,["onKeyup","modelValue"])])],64)}}};var m=o(151),h=o(5589),v=o(6122),b=o(629),g=o(4765),w=o(4842),y=o(4554),f=o(8240),q=o(7518),k=o.n(q);const C=d,_=C;k()(d,"components",{QCard:m.Z,QCardSection:h.Z,QCircularProgress:v.Z,QChatMessage:b.Z,QSpinnerDots:g.Z,QInput:w.Z,QIcon:y.Z,QBtn:f.Z})}}]);