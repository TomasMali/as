"use strict";(globalThis["webpackChunkweb_as400"]=globalThis["webpackChunkweb_as400"]||[]).push([[977],{977:(e,o,t)=>{t.r(o),t.d(o,{default:()=>Q});t(5663);var n=t(3673),a=t(2323),s=t(1959),r=t(8880),c=(t(6701),t(1907)),i=t(589);const l=(0,c.Q_)("bot",{state:()=>({botResponse:""}),getters:{getBotResponse:e=>e.botResponse},actions:{async setBotRequest(e){let o="http://"+window.location.hostname+":3300/db2/openai";const t=await fetch(o,{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e}),redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),n=await t.json();if(!t.ok)throw 409===n.code?new Error(n.message):new Error("Request failed with error code: "+t.status);this.botResponse=n,this.sendLogsAction(e)},async sendLogsAction(e){let o="http://"+window.location.hostname+":3300/db2/log/?log="+i.Z.getItem("currentUser")+" Asked: ---\x3e      \n\n"+e;const t=await fetch(o,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),n=await t.json();if(!t.ok)throw 409===n.code?new Error(n.message):new Error("Request failed with error code: "+t.status)}}});var u=t(8825);const p={class:"q-pa-md row justify-center",style:{height:"700px","overflow-y":"scroll"}},d={style:{width:"100%","max-width":"800px","max-height":""}},m={class:"code-formatter","bg-color":"amber"},h={key:0},g={class:"absolute-bottom"},w={__name:"BotGPT",setup(e){const o=(0,u.Z)(),t=()=>o.localStorage.getItem("currentUser"),c=l(),i=(0,s.iH)(""),w=(0,s.iH)(""),v=(0,s.iH)("");var b=(0,s.iH)(!1);const y=(0,s.iH)([]),f=(0,s.iH)([]),k=()=>!0,q=()=>C(),C=async()=>{y.value=[];const e=i.value;i.value="",b.value=!0,v.value=e,f.value.push(e);try{await c.setBotRequest(e),w.value=c.getBotResponse.bot,y.value.push(w.value),console.log(w.value),b.value=!1,i.value=""}catch(o){console.log(o)}};return(e,o)=>{const c=(0,n.up)("q-chat-message"),l=(0,n.up)("q-spinner-dots"),u=(0,n.up)("q-icon"),v=(0,n.up)("q-btn"),C=(0,n.up)("q-input");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",p,[(0,n._)("div",d,[(0,n.Wm)(c,{name:t(),text:f.value,avatar:"https://icons.iconarchive.com/icons/custom-icon-design/pretty-office-2/128/man-icon.png",sent:""},null,8,["name","text"]),k()?((0,n.wg)(),(0,n.j4)(c,{key:0,name:"Bot",avatar:"https://icons.iconarchive.com/icons/proycontec/robots/128/robot-screen-settings-icon.png","bg-color":"amber"})):((0,n.wg)(),(0,n.j4)(c,{key:1,name:"Bot",avatar:"https://icons.iconarchive.com/icons/proycontec/robots/128/robot-screen-settings-icon.png","bg-color":"amber",text:y.value},null,8,["text"])),(0,n._)("div",m,[k()?((0,n.wg)(),(0,n.iD)("pre",h,[(0,n.Uk)("            "),(0,n._)("code",null,"\n            "+(0,a.zw)(w.value)+"\n           ",1),(0,n.Uk)("\n        ")])):(0,n.kq)("",!0)]),(0,s.SU)(b)?((0,n.wg)(),(0,n.j4)(l,{key:2,"bg-color":"amber",size:"2rem"})):(0,n.kq)("",!0)])]),(0,n._)("div",g,[(0,n.Wm)(C,{outlined:"","bottom-slots":"",onKeyup:(0,r.D2)(q,["enter"]),modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=e=>i.value=e),label:"Chiedimi qualsiasi cosa"},{append:(0,n.w5)((()=>[""!==i.value?((0,n.wg)(),(0,n.j4)(u,{key:0,name:"close",onClick:o[0]||(o[0]=e=>i.value=""),class:"cursor-pointer"})):(0,n.kq)("",!0)])),after:(0,n.w5)((()=>[(0,n.Wm)(v,{onClick:q,round:"",dense:"",flat:"",icon:"send"})])),_:1},8,["onKeyup","modelValue"])])],64)}}};var v=t(151),b=t(5589),y=t(6122),f=t(629),k=t(4765),q=t(4842),C=t(4554),_=t(8240),Z=t(7518),j=t.n(Z);const x=w,Q=x;j()(w,"components",{QCard:v.Z,QCardSection:b.Z,QCircularProgress:y.Z,QChatMessage:f.Z,QSpinnerDots:k.Z,QInput:q.Z,QIcon:C.Z,QBtn:_.Z})}}]);