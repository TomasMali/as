"use strict";(globalThis["webpackChunkweb_as400"]=globalThis["webpackChunkweb_as400"]||[]).push([[106],{8106:(e,o,r)=>{r.r(o),r.d(o,{default:()=>E});var a=r(3673),l=r(1959),t=r(8880),i=r(2323),s=r(1907),n=r(589);const d=(0,s.Q_)("uttil",{state:()=>({utilizzatori:[],search:(0,l.iH)(""),showoccurence:(0,l.iH)(!1),loading:!1,filter:"",grid:!1,dialog:(0,l.iH)(!1),maximizedToggle:(0,l.iH)(!0),selectedRow:{},programRow:[],loadProgram:!1,filterProgram:"",gridProgram:!1,searchProgram:(0,l.iH)("")}),getters:{getUtilizzatori:e=>e.utilizzatori,getProgram:e=>e.programRow},actions:{async setProgram(e){var o="";if("SQLRPGLE"===e.filetype||"RPGLE"===e.filetype)o="QRPGLESRC";else{if("SQL"!==e.filetype)return void(this.programRow=[]);o="QSQLSRC"}let r="http://"+window.location.hostname+":3300/utilizzatori/getProgram/?programName="+e.programName+"&lib="+e.lib+"&filetype="+o;console.log(r);const a=await fetch(r,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),l=await a.json();if(!a.ok)throw 409===l.code?new Error(l.message):new Error("Request failed with error code: "+a.status);this.programRow=l},async setUtilizzatori(e){let o="http://"+window.location.hostname+":3300/utilizzatori/find/?as="+n.Z.getItem("as")+"&userDb="+n.Z.getItem("userDb")+"&showoccurence="+e.showoccurence+"&programName="+e.programName;console.log(o);const r=await fetch(o,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),a=await r.json();if(!r.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+r.status);this.utilizzatori=a,this.sendLogsAction("as="+n.Z.getItem("as")+" userDb="+n.Z.getItem("userDb")+"  showoccurence="+e.showoccurence+"  programName="+e.programName)},async sendLogsAction(e){let o="http://"+window.location.hostname+":3300/db2/log/?log="+n.Z.getItem("currentUser")+" UTILIZZATORE: ---\x3e      \n\n"+e;const r=await fetch(o,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),a=await r.json();if(!r.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+r.status)}}}),c={class:"row q-pa-md"},m={class:"text-h6"},p={style:{"font-weight":"bold","font-size":"14px"}},g={key:1},w={style:{"font-weight":"bold","font-size":"14px"}},u={__name:"Utilizzatore",setup(e){const o=d(),r=()=>{o.search.length>3&&(o.showoccurence=!1,u())},s=(e,r)=>e.includes(r)&&!o.showoccurence,n=()=>{o.searchProgram.length>3&&(o.showoccurence=!0,u())},u=async()=>{try{const e={showoccurence:o.showoccurence?"s":"",programName:o.showoccurence?o.searchProgram:o.search};o.loading=!0,await o.setUtilizzatori(e),o.loading=!1}catch(e){console.log(e)}},h=e=>{o.dialog=!0,o.selectedRow=e;const r={programName:e.SRCCT,lib:e.LIBRCT,filetype:e.SRCTCT};f(r)},f=async e=>{try{o.loadProgram=!0,await o.setProgram(e),o.loadProgram=!1}catch(r){console.log(r)}};return(e,d)=>{const u=(0,a.up)("q-icon"),f=(0,a.up)("q-input"),y=(0,a.up)("q-btn"),S=(0,a.up)("q-card-section"),b=(0,a.up)("q-card"),U=(0,a.up)("q-toggle"),C=(0,a.up)("q-inner-loading"),z=(0,a.up)("q-badge"),T=(0,a.up)("q-td"),R=(0,a.up)("q-tr"),_=(0,a.up)("q-table"),W=(0,a.up)("q-space"),k=(0,a.up)("q-tooltip"),q=(0,a.up)("q-bar"),P=(0,a.up)("q-dialog"),x=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(b,{bordered:"",class:"q-my-sm q-mx-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{class:""},{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a.Wm)(f,{class:"q-mr-sm",dense:"",square:"",color:"primary","label-color":"primary",outlined:"",modelValue:(0,l.SU)(o).search,"onUpdate:modelValue":d[0]||(d[0]=e=>(0,l.SU)(o).search=e),label:"Cerca chi chiama il programma..",onKeyup:(0,t.D2)(r,["enter"])},{append:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"bolt",color:"primary"})])),_:1},8,["modelValue","onKeyup"]),(0,a.Wm)(y,{class:"q-mr-xl",dense:"",inline:"",color:"primary q-ml-sm",label:"Search","icon-right":"send",onClick:r,disable:(0,l.SU)(o).search.length<3},null,8,["disable"]),(0,a.Wm)(f,{class:"q-ml-xl",dense:"",square:"",color:"primary","label-color":"primary",modelValue:(0,l.SU)(o).searchProgram,"onUpdate:modelValue":d[1]||(d[1]=e=>(0,l.SU)(o).searchProgram=e),label:"Visualizza un programma",onKeyup:(0,t.D2)(n,["enter"])},{append:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"search",color:"primary"})])),_:1},8,["modelValue","onKeyup"]),(0,a.Wm)(y,{dense:"",inline:"",color:"primary q-ml-sm",label:"Search","icon-right":"search",onClick:n,disable:(0,l.SU)(o).searchProgram.length<3},null,8,["disable"])])])),_:1})])),_:1}),(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,{class:"text-subtitle2 my-sticky-header-table","table-header-class":"text-white ",rows:(0,l.SU)(o).utilizzatori,"row-key":"utStore.getUtilizzatori.SRCCT","auto-width":"",loading:(0,l.SU)(o).loading,boarderd:"",title:"Risultato programmi",separator:"cell",style:{height:"720px"},filter:(0,l.SU)(o).filter,rowsPerPage:1e4,"rows-per-page-options":[0,8,18],ref:"tabCol",grid:(0,l.SU)(o).grid},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(f,{borderless:"",dense:"",debounce:"300",modelValue:(0,l.SU)(o).filter,"onUpdate:modelValue":d[3]||(d[3]=e=>(0,l.SU)(o).filter=e),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"search",color:"white"}),(0,a.Wm)(U,{modelValue:(0,l.SU)(o).grid,"onUpdate:modelValue":d[2]||(d[2]=e=>(0,l.SU)(o).grid=e),color:"red",label:"Grid"},null,8,["modelValue"])])),_:1},8,["modelValue"])])),loading:(0,a.w5)((()=>[(0,a.Wm)(C,{showing:"",color:"primary"})])),body:(0,a.w5)((e=>[(0,a.Wm)(R,{props:e,onClick:o=>h(e.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{key:"SRCCT",props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{color:"purple",class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.row.SRCCT),1)])),_:2},1024)])),_:2},1032,["props"]),(0,a.Wm)(T,{key:"SRCTCT",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.row.SRCTCT),1)])),_:2},1032,["props"]),(0,a.Wm)(T,{key:"LIBRCT",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.row.LIBRCT),1)])),_:2},1032,["props"])])),_:2},1032,["props","onClick"])])),_:1},8,["rows","loading","filter","grid"])])),_:1})])),_:1}),(0,a.Wm)(P,{modelValue:(0,l.SU)(o).dialog,"onUpdate:modelValue":d[8]||(d[8]=e=>(0,l.SU)(o).dialog=e),persistent:"",maximized:(0,l.SU)(o).maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(W),(0,a.Wm)(y,{dense:"",flat:"",icon:"minimize",onClick:d[4]||(d[4]=e=>(0,l.SU)(o).maximizedToggle=!1),disable:!(0,l.SU)(o).maximizedToggle},{default:(0,a.w5)((()=>[(0,l.SU)(o).maximizedToggle?((0,a.wg)(),(0,a.j4)(k,{key:0,class:"bg-white text-primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("Minimize")])),_:1})):(0,a.kq)("",!0)])),_:1},8,["disable"]),(0,a.Wm)(y,{dense:"",flat:"",icon:"crop_square",onClick:d[5]||(d[5]=e=>(0,l.SU)(o).maximizedToggle=!0),disable:(0,l.SU)(o).maximizedToggle},{default:(0,a.w5)((()=>[(0,l.SU)(o).maximizedToggle?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(k,{key:0,class:"bg-white text-primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("Maximize")])),_:1}))])),_:1},8,["disable"]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(y,{dense:"",flat:"",icon:"close"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"bg-white text-primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("Close")])),_:1})])),_:1})),[[x]])])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a._)("div",m,(0,i.zw)("Cerchiamo: "+(0,l.SU)(o).search+" ----------\x3e "+(0,l.SU)(o).selectedRow.LIBRCT+"."+(0,l.SU)(o).selectedRow.SRCCT),1)])),_:1}),(0,a.Wm)(S,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{class:"text-subtitle2 my-sticky-header-table","table-header-class":"text-white ",rows:(0,l.SU)(o).programRow,"row-key":"utStore.programRow.SRCDAT",dense:"","auto-width":"",loading:(0,l.SU)(o).loadProgram,title:"Risultato programmi",separator:"none",style:{height:"85vh"},filter:(0,l.SU)(o).filterProgram,rowsPerPage:1e4,"rows-per-page-options":[0,8,18],ref:"tabCol",grid:(0,l.SU)(o).gridProgram},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(f,{borderless:"",dense:"",debounce:"300",modelValue:(0,l.SU)(o).filterProgram,"onUpdate:modelValue":d[7]||(d[7]=e=>(0,l.SU)(o).filterProgram=e),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"search",color:"white"}),(0,a.Wm)(U,{modelValue:(0,l.SU)(o).gridProgram,"onUpdate:modelValue":d[6]||(d[6]=e=>(0,l.SU)(o).gridProgram=e),color:"red",label:"Grid"},null,8,["modelValue"])])),_:1},8,["modelValue"])])),loading:(0,a.w5)((()=>[(0,a.Wm)(C,{showing:"",color:"primary"})])),body:(0,a.w5)((e=>[(0,a.Wm)(R,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{key:"SRCDAT",props:e,style:{"white-space":"pre-wrap","font-family":"'Courier New', Courier, monospace"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.row.SRCDAT),1)])),_:2},1032,["props"]),(0,a.Wm)(T,{key:"SRCDTA",props:e,style:{"white-space":"pre-wrap","font-family":"'Courier New', Courier, monospace"}},{default:(0,a.w5)((()=>[s(e.row.SRCDTA,(0,l.SU)(o).search.toUpperCase())?((0,a.wg)(),(0,a.j4)(z,{key:0,color:"purple",class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a._)("b",p,(0,i.zw)(e.row.SRCDTA),1)])),_:2},1024)):((0,a.wg)(),(0,a.iD)("div",g,[(0,a._)("b",w,(0,i.zw)(e.row.SRCDTA),1)]))])),_:2},1032,["props"]),(0,a.Wm)(T,{key:"SRCSEQ",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.row.SRCSEQ),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","loading","filter","grid"])])),_:1})])),_:1})])),_:1},8,["modelValue","maximized"])])}}};var h=r(151),f=r(5589),y=r(4842),S=r(4554),b=r(8240),U=r(6429),C=r(8886),z=r(6941),T=r(8186),R=r(3884),_=r(9721),W=r(6778),k=r(846),q=r(2025),P=r(5363),x=r(6115),Q=r(677),Z=r(7518),V=r.n(Z);const D=u,E=D;V()(u,"components",{QCard:h.Z,QCardSection:f.Z,QInput:y.Z,QIcon:S.Z,QBtn:b.Z,QTable:U.Z,QToggle:C.Z,QInnerLoading:z.Z,QTr:T.Z,QTd:R.Z,QBadge:_.Z,QDialog:W.Z,QBar:k.Z,QSpace:q.Z,QTooltip:P.Z,QField:x.Z}),V()(u,"directives",{ClosePopup:Q.Z})}}]);