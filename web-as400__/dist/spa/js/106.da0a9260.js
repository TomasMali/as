"use strict";(globalThis["webpackChunkweb_as400"]=globalThis["webpackChunkweb_as400"]||[]).push([[106],{8106:(e,o,r)=>{r.r(o),r.d(o,{default:()=>Z});r(3610);var a=r(3673),t=r(1959),l=r(2323),i=(r(6701),r(1907)),s=r(589);const d=(0,i.Q_)("uttil",{state:()=>({utilizzatori:[],search:(0,t.iH)(""),showoccurence:(0,t.iH)(!1),loading:!1,filter:"",grid:!1,dialog:(0,t.iH)(!1),maximizedToggle:(0,t.iH)(!0),selectedRow:{},programRow:[],loadProgram:!1,filterProgram:"",gridProgram:!1}),getters:{getUtilizzatori:e=>e.utilizzatori,getProgram:e=>e.programRow},actions:{async setProgram(e){var o="";if("SQLRPGLE"===e.filetype||"RPGLE"===e.filetype)o="QRPGLESRC";else{if("SQL"!==e.filetype)return void(this.programRow=[]);o="QSQLSRC"}let r="http://"+window.location.hostname+":3300/utilizzatori/getProgram/?programName="+e.programName+"&lib="+e.lib+"&filetype="+o;console.log(r);const a=await fetch(r,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),t=await a.json();if(!a.ok)throw 409===t.code?new Error(t.message):new Error("Request failed with error code: "+a.status);this.programRow=t},async setUtilizzatori(e){let o="http://"+window.location.hostname+":3300/utilizzatori/find/?as="+s.Z.getItem("as")+"&userDb="+s.Z.getItem("userDb")+"&showoccurence="+e.showoccurence+"&programName="+e.programName;console.log(o);const r=await fetch(o,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),a=await r.json();if(!r.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+r.status);this.utilizzatori=a,this.sendLogsAction("as="+s.Z.getItem("as")+" userDb="+s.Z.getItem("userDb")+"  showoccurence="+e.showoccurence+"  programName="+e.programName)},async sendLogsAction(e){let o="http://"+window.location.hostname+":3300/db2/log/?log="+s.Z.getItem("currentUser")+" UTILIZZATORE: ---\x3e      \n\n"+e;const r=await fetch(o,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),a=await r.json();if(!r.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+r.status)}}}),n={class:"row q-pa-md"},m={class:"text-h6"},c={key:1},p={__name:"Utilizzatore",setup(e){const o=d(),r=()=>{i()},i=async()=>{try{const e={showoccurence:o.showoccurence?"s":"",programName:o.search};o.loading=!0,await o.setUtilizzatori(e),o.loading=!1}catch(e){console.log(e)}},s=e=>{o.dialog=!0,o.selectedRow=e;const r={programName:e.SRCCT,lib:e.LIBRCT,filetype:e.SRCTCT};p(r)},p=async e=>{try{o.loadProgram=!0,await o.setProgram(e),o.loadProgram=!1}catch(r){console.log(r)}};return(e,i)=>{const d=(0,a.up)("q-icon"),p=(0,a.up)("q-input"),g=(0,a.up)("q-btn"),w=(0,a.up)("q-card-section"),u=(0,a.up)("q-card"),h=(0,a.up)("q-toggle"),f=(0,a.up)("q-inner-loading"),S=(0,a.up)("q-badge"),U=(0,a.up)("q-td"),y=(0,a.up)("q-tr"),b=(0,a.up)("q-table"),C=(0,a.up)("q-space"),T=(0,a.up)("q-tooltip"),z=(0,a.up)("q-bar"),R=(0,a.up)("q-dialog"),_=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(u,{bordered:"",class:"q-my-sm q-mx-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:""},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a.Wm)(p,{class:"q-mr-sm",dense:"",square:"",color:"primary","label-color":"primary",outlined:"",modelValue:(0,t.SU)(o).search,"onUpdate:modelValue":i[0]||(i[0]=e=>(0,t.SU)(o).search=e),label:"Cerca un programma o file"},{append:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"bolt",color:"primary"})])),_:1},8,["modelValue"]),(0,a.Wm)(g,{dense:"",inline:"",color:"primary q-ml-sm",label:"Search","icon-right":"send",onClick:r,disable:(0,t.SU)(o).search.length<3},null,8,["disable"])])])),_:1})])),_:1}),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"text-subtitle2 my-sticky-header-table","table-header-class":"text-white ",rows:(0,t.SU)(o).utilizzatori,"row-key":"utStore.getUtilizzatori.SRCCT","auto-width":"",loading:(0,t.SU)(o).loading,boarderd:"",title:"Risultato programmi",separator:"cell",style:{height:"720px"},filter:(0,t.SU)(o).filter,rowsPerPage:1e4,"rows-per-page-options":[0,8,18],ref:"tabCol",grid:(0,t.SU)(o).grid},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(p,{borderless:"",dense:"",debounce:"300",modelValue:(0,t.SU)(o).filter,"onUpdate:modelValue":i[2]||(i[2]=e=>(0,t.SU)(o).filter=e),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"search",color:"white"}),(0,a.Wm)(h,{modelValue:(0,t.SU)(o).grid,"onUpdate:modelValue":i[1]||(i[1]=e=>(0,t.SU)(o).grid=e),color:"red",label:"Grid"},null,8,["modelValue"])])),_:1},8,["modelValue"])])),loading:(0,a.w5)((()=>[(0,a.Wm)(f,{showing:"",color:"primary"})])),body:(0,a.w5)((e=>[(0,a.Wm)(y,{props:e,onClick:o=>s(e.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{key:"SRCCT",props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{color:"purple",class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.row.SRCCT),1)])),_:2},1024)])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"SRCTCT",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.row.SRCTCT),1)])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"LIBRCT",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.row.LIBRCT),1)])),_:2},1032,["props"])])),_:2},1032,["props","onClick"])])),_:1},8,["rows","loading","filter","grid"])])),_:1})])),_:1}),(0,a.Wm)(R,{modelValue:(0,t.SU)(o).dialog,"onUpdate:modelValue":i[7]||(i[7]=e=>(0,t.SU)(o).dialog=e),persistent:"",maximized:(0,t.SU)(o).maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C),(0,a.Wm)(g,{dense:"",flat:"",icon:"minimize",onClick:i[3]||(i[3]=e=>(0,t.SU)(o).maximizedToggle=!1),disable:!(0,t.SU)(o).maximizedToggle},{default:(0,a.w5)((()=>[(0,t.SU)(o).maximizedToggle?((0,a.wg)(),(0,a.j4)(T,{key:0,class:"bg-white text-primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("Minimize")])),_:1})):(0,a.kq)("",!0)])),_:1},8,["disable"]),(0,a.Wm)(g,{dense:"",flat:"",icon:"crop_square",onClick:i[4]||(i[4]=e=>(0,t.SU)(o).maximizedToggle=!0),disable:(0,t.SU)(o).maximizedToggle},{default:(0,a.w5)((()=>[(0,t.SU)(o).maximizedToggle?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(T,{key:0,class:"bg-white text-primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("Maximize")])),_:1}))])),_:1},8,["disable"]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(g,{dense:"",flat:"",icon:"close"},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{class:"bg-white text-primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("Close")])),_:1})])),_:1})),[[_]])])),_:1}),(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a._)("div",m,(0,l.zw)("Cerchiamo: "+(0,t.SU)(o).search+"  ----------\x3e  "+(0,t.SU)(o).selectedRow.LIBRCT+"."+(0,t.SU)(o).selectedRow.SRCCT),1)])),_:1}),(0,a.Wm)(w,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"text-subtitle2 my-sticky-header-table","table-header-class":"text-white ",rows:(0,t.SU)(o).programRow,"row-key":"utStore.programRow.SRCDAT",dense:"","auto-width":"",loading:(0,t.SU)(o).loadProgram,title:"Risultato programmi",separator:"none",style:{height:"720px"},filter:(0,t.SU)(o).filterProgram,rowsPerPage:1e4,"rows-per-page-options":[0,8,18],ref:"tabCol",grid:(0,t.SU)(o).gridProgram},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(p,{borderless:"",dense:"",debounce:"300",modelValue:(0,t.SU)(o).filterProgram,"onUpdate:modelValue":i[6]||(i[6]=e=>(0,t.SU)(o).filterProgram=e),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"search",color:"white"}),(0,a.Wm)(h,{modelValue:(0,t.SU)(o).gridProgram,"onUpdate:modelValue":i[5]||(i[5]=e=>(0,t.SU)(o).gridProgram=e),color:"red",label:"Grid"},null,8,["modelValue"])])),_:1},8,["modelValue"])])),loading:(0,a.w5)((()=>[(0,a.Wm)(f,{showing:"",color:"primary"})])),body:(0,a.w5)((e=>[(0,a.Wm)(y,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{key:"SRCDAT",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.row.SRCDAT),1)])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"SRCDTA",props:e},{default:(0,a.w5)((()=>[e.row.SRCDTA.includes((0,t.SU)(o).search.toUpperCase())?((0,a.wg)(),(0,a.j4)(S,{key:0,color:"purple",class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.row.SRCDTA),1)])),_:2},1024)):((0,a.wg)(),(0,a.iD)("div",c,(0,l.zw)(e.row.SRCDTA),1))])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"SRCSEQ",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.row.SRCSEQ),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","loading","filter","grid"])])),_:1})])),_:1})])),_:1},8,["modelValue","maximized"])])}}};var g=r(151),w=r(5589),u=r(4842),h=r(4554),f=r(8240),S=r(8886),U=r(8107),y=r(6941),b=r(8186),C=r(3884),T=r(9721),z=r(6778),R=r(846),_=r(2025),k=r(5363),W=r(6115),q=r(677),P=r(7518),x=r.n(P);const Q=p,Z=Q;x()(p,"components",{QCard:g.Z,QCardSection:w.Z,QInput:u.Z,QIcon:h.Z,QBtn:f.Z,QToggle:S.Z,QTable:U.Z,QInnerLoading:y.Z,QTr:b.Z,QTd:C.Z,QBadge:T.Z,QDialog:z.Z,QBar:R.Z,QSpace:_.Z,QTooltip:k.Z,QField:W.Z}),x()(p,"directives",{ClosePopup:q.Z})}}]);